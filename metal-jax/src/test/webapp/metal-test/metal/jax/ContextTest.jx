/**
 * @test ContextTest
 * 
 * @imports metal.jax.Context
 * @imports metal.jax.Object
 * @imports metal.jax.Object Object2
 * @imports .base baseContext
 * 
 * @setting classLoader=metal.jax.Context
 * @setting classLoader1=${classLoader}
 * @setting classLoader2=  ${classLoader}  ${classLoader}
 */

$imports.Object3 = "metal.jax.Object";
$setting["classLoader3"] = "${classLoader}";

//@private
function initClass() {
	this.initClassTested = true;
}

//@private
function initObject(object) {
	$private.initObjectTested = true;
}

//@public
function test_initClass() {
	assertEquals(true, initClassTested);
}

//@public
function test_initObject() {
	assertEquals(true, initObjectTested);
}

//@public
function test_classSetting() {
	assertEquals($context, baseContext.getContext());
	assertEquals($imports, $private.$imports);
	assertEquals($private, $private.$private);
	assertEquals($protected, $private.$protected);
	assertEquals($public, $private.$public);
	assertEquals($setting, $private.$setting);
	assertEquals($static, $private.$static);
	assertEquals($super, $private.$super);
	assertEquals($super.$protected, $private.$super.$protected);
	assertEquals($super.$static, $private.$super.$static);
	
	assertEquals($("classLoader"), Context.getName());
	assertEquals($("classLoader1"), Context.getName());
	assertEquals($("classLoader2"), "  ".concat(Context.getName(), "  ", Context.getName()));
	assertEquals($("classLoader3"), Context.getName());
	
	assertEquals(Object, Object2);
	assertEquals(Object, Object3);
}

//@public
function test_getSuperClass() {
	assertEquals(null, Context.getSuperClass());
}

//@public
function test_newObject() {
	assertEquals(Context, new Context().getClass());
	assertEquals(ContextTest, new ContextTest().getClass());
}

//@public
function test_loadClass() {
	$context.loadClass("NoSuchClass", function() {
		try {
			$context.findClass("NoSuchClass", true);
			fail("should fail");
		} catch (ex) {}
	});
}

//@public
function test_findClass() {
	assertEquals(Context, new Context().findClass(Context.getName()));
}
