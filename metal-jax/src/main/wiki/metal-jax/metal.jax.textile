<link type="text/css" rel="stylesheet" href="../styles/main.css"/>

p(title). Context @metal.jax@

{toc:style=decimal}

h1. Overview

This is the boot context. Its loading will bootstrap the application.

h1. Summary

The boot context accomplishes the following:
* Configures initial context settings.
* Bootstraps the class loader.
* Bootstraps the app base context.

The boot context handles source loading across domain. A few bootstrapping methods are published to class loader scope for reuse.

See also: "@metal.jax.Context@":metal.jax.Context.html

h1. Detail

h2. Context Settings

Settings are configuration parameters/properties.

table(grid).
|_.Name |_.Value |_.Comments |
| baseURL | _Readonly_ | The document URL. |
| baseOrigin | _Readonly_ | The base URL origin. |
| baseScheme | _Readonly_ | The base URL scheme. |
| baseModule | _Required_ | The folder for baseContext. |
| baseContext | @base@ | The initial app context. |
| bootClass | _Default empty_ | The fallback for baseContext. Specified with fragment in the base URL. |
| bootURL | _Readonly_ | The URL to load metal-jax boot context. |
| bootOrigin | _Readonly_ | The boot URL origin. |
| bootModule | @metal-jax@ | The folder for metal-jax. |
| bootContext | @metal.jax@ | The initial metal-jax context. |
| crossDomain | @xd@ | Path segment to identify cross domain requests. |
| crossTimeout | @3000@ | Timeout value for cross domain requests, in mili-seconds |
| classType | @jx@ | File extension for jax source files. |
| faceType | @html@ | File extension for jax face source files. |

h2. Source Properties

Source properties are source parsing results for class/context creation.

table(grid).
|_.Name |_.Value |_.Comments |
| stereotype | @context@ | Type token for context creation. |
| name | @metal.jax.Context@ | Identifies source as well as class/context. |
| scope | $public, $protected, $static, $imports, $requires, $setting | Private scope variables. |
| setting | source, stereotype | _More settings_. |

h2. Context Source Settings

Context source settings define context source locations.

table(grid).
|_.Name |_.Value |_.Comments |
| base | ${bootURL} | Base path to load context sources. |
| module | ${bootModule} | Module folder to load context sources. |
| includes | ^metal.jax[.] | Regexp for source names. |

h2. Source Stereotypes

Source stereotypes define default base class for each type.

table(grid).
|_.Name |_.Value |_.Comments |
| class | @metal.jax.Object@ | Class source. |
| context | @metal.jax.Context@ | Context source. |
| face | @metal.jax.Face@ | Face source. |
| html | @metal.jax.Face@ | HTML source. |
| resource | @metal.jax.Resource@ | Resource source. |
| service | @metal.jax.Service@ | Service source. |

h2. Bootstrapping Methods

These methods are published to class loader scope.

table(grid).
|_.Name |_.Scope |_.Comments |
| compile | private | Used by class loader to eval class source. |
| loadback | private | Used by class loader to load class source. |
| splitPath | static | For splitting path. |
| resolvePath | static | For resolving path against a base path. |

h2. Bootstrapping Steps

# Parse baseURL and bootURL to initialize settings.
# Load Context source.
# Evaluate source and initialize Context as a class, including its dependency classes.
# Load and initialize base context.
## Load base context as a class.
## Parse base document for classes.
## Try loading boot class.
