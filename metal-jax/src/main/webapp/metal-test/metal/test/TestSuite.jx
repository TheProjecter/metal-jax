/**
 * @class metal.test.TestSuite
 * @imports TestCase
 * 
 * @copyright Jay Tang 2012
 * All rights reserved. This program and the accompanying materials
 * are made available under the terms of the Eclipse Public License v1.0
 * which accompanies this distribution, and is available at
 * http://www.eclipse.org/legal/epl-v10.html
 */

//@public
function run(context) {
	var runner = this, testName = $("bootClass");
	if (!testName) {
		runAll.call(runner, context);
	} else {
		context.loadClass(testName, function() {
			var testClass = context.findClass(testName);
			if (testClass && testClass.extendsClass(TestCase)) {
				runner.runTest(testClass.newObject(context));
			} else {
				var test = testClass.newObject(context);
				runAll.call(runner, context);
			}
		});
	}
}

//@private
function runAll(context) {
	for (var name in context.$) {
		this.runTest(context.$[name]);
	}
}

//@public
function runTest(test) {
	if (test instanceof TestCase) {
		test.run();
	}
}
